
<HTML>
 <HEAD>
  <TITLE> Test Page</TITLE>
	<meta http-equiv=Content-Type content="text/html;charset=UTF-8">
 </HEAD>

 <BODY>
<!-- 
KW: 20141027172537#e3bccf97497d86e76bed2e6f69b0b420
SID: 5E836936D590F6D850DD9C444F0FACAB
clientName: ANDROID
version: 3.4
terminalId: 18752011082
userId: 16213538
imei: 865267020948781
imsi: 460027520131772
channel: StoreAlliance
Content-Length: 792
Content-Type: text/plain; charset=UTF-8
Host: 112.4.28.64:8080
Connection: Keep-Alive
-->
<?PHP
$timestr[0]='KW: 20141027172537#e3bccf97497d86e76bed2e6f69b0b420';
$timestr[1]='KW: 20141027172916#9a65d02cf133853024b8097b5201f289';
$timestr[2]='KW: 20141027173025#0ed70f0792f51ba094e72921c33e7704';
$timestr[3]='KW: 20141027175823#fade427117ae2c821c6144f29b204ec2';
$timestr[4]='KW: 20141027175833#8d562d5f1f24438b05d3c855014a40f0';
$timestr[5]='KW: 20141027175843#da7a4686f608c0e09bf38163778a83c8';
$timestr[6]='KW: 20141027175852#de0ae4d091510cc85da4f3949b7f9662';
$timestr[7]='KW: 20141027175913#e8505e398d8e0f2d707f1d1815055942';
$timestr[8]='e3bccf97497d86e76bed2e6f69b0b420';
$timestr[9]='fade427117ae2c821c6144f29b204ec2';

$datastr[0]='65794a44534556445331394c56794936496a49774d5451784d4449334d5463794e544d334932557a596d4e6a5a6a6b334e446b335a4467325a546332596d566b4d6d55325a6a5935596a42694e4449774969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a49344d545133496977695656394a52434936496a45324d6a457a4e544d344969776956466c51525349364d43776953553148496a6f69496977695645565354556c4f51557866535551694f6949784f4463314d6a41784d5441344d694a39';
$datastr[1]='65794a44534556445331394c56794936496a49774d5451784d4449334d5463794f544532497a6c684e6a566b4d444a6a5a6a457a4d7a67314d7a41794e4749344d446b33596a55794d44466d4d6a67354969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a55354f446b694c434a5658306c45496a6f694d5459794d544d314d7a67694c434a5557564246496a6f774c434a4a545563694f6949694c434a5552564a4e535535425446394a52434936496a45344e7a55794d4445784d446779496e303d';
$datastr[2]='65794a44534556445331394c56794936496a49774d5451784d4449334d54637a4d444931497a426c5a4463775a6a41334f544a6d4e544669595441354e4755334d6a6b794d574d7a4d3255334e7a41304969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a45784d6a49324e434973496c5666535551694f6949784e6a49784d7a557a4f434973496c525a554555694f6a4173496b6c4e5279493649694973496c5246556b314a546b464d58306c45496a6f694d5467334e5449774d5445774f44496966513d3d';
$datastr[3]='65794a44534556445331394c56794936496a49774d5451784d4449334d5463314f44497a49325a685a4755304d6a63784d5464685a544a6a4f444978597a59784e44526d4d6a6c694d6a41305a574d794969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a55354f446b694c434a5658306c45496a6f694d5459794d544d314d7a67694c434a5557564246496a6f774c434a4a545563694f6949694c434a5552564a4e535535425446394a52434936496a45344e7a55794d4445784d446779496e303d';
$datastr[4]='65794a44534556445331394c56794936496a49774d5451784d4449334d5463314f444d7a497a686b4e5459795a44566d4d5759794e44517a4f4749774e57517a597a67314e5441784e4745304d4759774969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a45784d6a49324e434973496c5666535551694f6949784e6a49784d7a557a4f434973496c525a554555694f6a4173496b6c4e5279493649694973496c5246556b314a546b464d58306c45496a6f694d5467334e5449774d5445774f44496966513d3d';
$datastr[5]='65794a44534556445331394c56794936496a49774d5451784d4449334d5463314f44517a493252684e3245304e6a67325a6a59774f474d775a544135596d597a4f4445324d7a63334f4745344d324d344969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a55334d694973496c5666535551694f6949784e6a49784d7a557a4f434973496c525a554555694f6a4173496b6c4e5279493649694973496c5246556b314a546b464d58306c45496a6f694d5467334e5449774d5445774f44496966513d3d';
$datastr[6]='65794a44534556445331394c56794936496a49774d5451784d4449334d5463314f4455794932526c4d47466c4e4751774f5445314d54426a597a67315a4745305a6a4d354e446c694e3259354e6a59794969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a67314e694973496c5666535551694f6949784e6a49784d7a557a4f434973496c525a554555694f6a4173496b6c4e5279493649694973496c5246556b314a546b464d58306c45496a6f694d5467334e5449774d5445774f44496966513d3d';
$datastr[7]='65794a44534556445331394c56794936496a49774d5451784d4449334d5463314f54457a493255344e5441315a544d354f4751345a54426d4d6d51334d44646d4d5751784f4445314d4455314f5451794969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a4d304e6a55334e7a55694c434a5658306c45496a6f694d5459794d544d314d7a67694c434a5557564246496a6f774c434a4a545563694f6949694c434a5552564a4e535535425446394a52434936496a45344e7a55794d4445784d446779496e303d';
$datastr[8]='';
$datastr[9]='';

$head[0] = $timestr[$i];
$head[]  = 'SID: 5E836936D590F6D850DD9C444F0FACAB'; 
$head[]  = 'clientName: ANDROID'; 
$head[]  = 'version: 3.4'; 
$head[]  = 'terminalId: 18752011082'; 
$head[]  = 'userId: 16213538'; 
$head[]  = 'imei: 865267020948781'; 
$head[]  = 'imsi: 460027520131772'; 
$head[]  = 'channel: StoreAlliance'; 
$head[]  = 'Content-Length: 792'; 
$head[]  = 'Content-Type: text/plain; charset=UTF-8'; 
$head[]  = 'Host: 112.4.28.64:8080'; 
$head[]  = 'Connection: Keep-Alive'; 

for($i=0;$i<8;$i++)
{
sleep(1);
// 初始化一个 cURL 对象
$curl = curl_init();

// 指定代理地址
//curl_setopt($curl, CURLOPT_PROXY, '192.168.2.135:8888');
// 如果需要的话，提供用户名和密码
//curl_setopt($curl, CURLOPT_PROXYUSERPWD,'user:pass');

// 设置你需要抓取的URL
curl_setopt($curl, CURLOPT_URL, 'http://112.4.28.64:8080/client/shopCheckinDo');

// 设置header,curl_exec返回的data内容不包括header
curl_setopt($curl, CURLOPT_HEADER, 1);

$head[0] = $timestr[$i];


// 设置cURL 参数，要求结果保存到字符串中还是输出到屏幕上。
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_HTTPHEADER, $head);

$post2= $datastr[$i];
curl_setopt($curl, CURLOPT_POST, 1);
// 把post的变量加上
curl_setopt($curl, CURLOPT_POSTFIELDS, $post2);

// 运行cURL，请求网页
$data = curl_exec($curl);

if ($data === FALSE) {
    echo "cURL Error: " . curl_error($curl);
}

//$info = curl_getinfo($curl);
//echo 'Get '. $info['url'] . ' Cost '. $info['total_time'] . ' Second<BR><BR><BR>';
//var_dump($info);

// 关闭URL请求
curl_close($curl);
}

?>
<?PHP
/*
$post_data = "65794a44534556445331394c56794936496a49774d5451784d4449334d5463794e544d334932557a596d4e6a5a6a6b334e446b335a4467325a546332596d566b4d6d55325a6a5935596a42694e4449774969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a49344d545133496977695656394a52434936496a45324d6a457a4e544d344969776956466c51525349364d43776953553148496a6f69496977695645565354556c4f51557866535551694f6949784f4463314d6a41784d5441344d694a39";
//$post_data = "65794a44534556445331394c56794936496a49774d5451784d4449334d5463314f44497a49325a685a4755304d6a63784d5464685a544a6a4f444978597a59784e44526d4d6a6c694d6a41305a574d794969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a55354f446b694c434a5658306c45496a6f694d5459794d544d314d7a67694c434a5557564246496a6f774c434a4a545563694f6949694c434a5552564a4e535535425446394a52434936496a45344e7a55794d4445784d446779496e303d";
$str = pack('H*',$post_data);
echo base64_decode($str);
echo '<BR><BR><BR>';

//echo time();
//echo '<BR>';
$idstring[0]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[1]='9a65d02cf133853024b8097b5201f289';
$idstring[2]='0ed70f0792f51ba094e72921c33e7704';
$idstring[3]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[4]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[5]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[6]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[7]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[8]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[9]='fade427117ae2c821c6144f29b204ec2';

// 初始化一个 cURL 对象
$curl = curl_init();

// 指定代理地址
curl_setopt($curl, CURLOPT_PROXY, '192.168.2.135:8888');
// 如果需要的话，提供用户名和密码
//curl_setopt($curl, CURLOPT_PROXYUSERPWD,'user:pass');

// 设置你需要抓取的URL
curl_setopt($curl, CURLOPT_URL, 'http://112.4.28.64:8080/client/shopCheckinDo');

// 设置header,curl_exec返回的data内容不包括header
curl_setopt($curl, CURLOPT_HEADER, 1);

//$head[0] = 'KW: '.date("YmdHis").'#'.$idstring[9];
$head[0] = 'KW: 20141027172916#9a65d02cf133853024b8097b5201f289';
$head[]  = 'SID: 5E836936D590F6D850DD9C444F0FACAB'; 
$head[]  = 'clientName: ANDROID'; 
$head[]  = 'version: 3.4'; 
$head[]  = 'terminalId: 18752011082'; 
$head[]  = 'userId: 16213538'; 
$head[]  = 'imei: 865267020948781'; 
$head[]  = 'imsi: 460027520131772'; 
$head[]  = 'channel: StoreAlliance'; 
$head[]  = 'Content-Length: 792'; 
$head[]  = 'Content-Type: text/plain; charset=UTF-8'; 
$head[]  = 'Host: 112.4.28.64:8080'; 
$head[]  = 'Connection: Keep-Alive'; 

// 设置cURL 参数，要求结果保存到字符串中还是输出到屏幕上。
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_HTTPHEADER, $head);

// 我们在POST数据哦！
$str1 = '{"CHECK_KW":"'.date("YmdHis").'#'.$idstring[9].'","USER_ID":"02530460351","VERSION":"1.0","CHECK_SID":"5E836936D590F6D850DD9C444F0FACAB","USER_NAME":"jun","CONT":"Check","LEVEL":"0.0","AREA_CODE":"025","SHOP_ID":"5989","U_ID":"16213538","TYPE":0,"IMG":"","TERMINAL_ID":"18752011082"}';
$str2 = base64_encode($str1);
$post_data = bin2hex($str2);
echo $post_data ;
echo '<BR>';
$post2= '65794a44534556445331394c56794936496a49774d5451784d4449334d5463794f544532497a6c684e6a566b4d444a6a5a6a457a4d7a67314d7a41794e4749344d446b33596a55794d44466d4d6a67354969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a55354f446b694c434a5658306c45496a6f694d5459794d544d314d7a67694c434a5557564246496a6f774c434a4a545563694f6949694c434a5552564a4e535535425446394a52434936496a45344e7a55794d4445784d446779496e303d';
curl_setopt($curl, CURLOPT_POST, 1);
// 把post的变量加上
curl_setopt($curl, CURLOPT_POSTFIELDS, $post2);

// 运行cURL，请求网页
$data = curl_exec($curl);

if ($data === FALSE) {
    echo "cURL Error: " . curl_error($curl);
}

$info = curl_getinfo($curl);
echo 'Get '. $info['url'] . ' Cost '. $info['total_time'] . ' Second<BR><BR><BR>';
//var_dump($info);

// 关闭URL请求
curl_close($curl);
var_dump($data);
*/

?>
 </BODY>
</HTML>