
<HTML>
 <HEAD>
  <TITLE> Test Page</TITLE>
	<meta http-equiv=Content-Type content="text/html;charset=UTF-8">
 </HEAD>

 <BODY>

<?PHP
echo 'begin:<BR>';
$post_data2 = "65794a6a623235305a573530496a6f6953476e7676497a6d694a486c6e4b6a6b76622f6e6c4b6874622b65556e2b6130752b57756f756149742b6572722b2b386a4f6131742b6d486a2b57566875575467655763714f6536762b574e732b5750722b693072655335734f2b386a4f654f734f6d486b654f41676569766e65693075656d447665694476656155722b53376d4f2b386a4f692f6d4f616369655751684f656e6a65614b6d4f614a6f2b532f6f656142722b4f41676565556e2b6130752b6931684f6975722b2b386a4f61456e2b696e696565636e2b6561684f572b694f69316e752b386a4f6144732b693174756530702b53346a7553396f4f574968755336712b5334692b2b3867655334692b693976655763734f5764674f61597279416749476830644841364c7938784d6a55344d4778705a6d5575593239744c33703358484a6362752b386a4f57506b656d41676565667265532f6f654b416e454869674a336f68374d784d4459314f4455344e54587676497a6b755a2f6c6a362f6b7536586f6a72666c6a35626b7549766f766233706b37376d6a71587676497a6b7661446c7636766f7235586f7235586c6b4b6676764945694c434a6d6247466e496a6f694d4441744d4441694c434a74633263694f694c6d6b34336b765a7a6d694a446c6970386966513d3d";
$post_data  = "0651061bfaf55cef1a574125d91657288333f5b88f87f888c98798ea4cb7218664d15aaa16195fcc6913d2a709078dd807211380337627348c75ef4c788a2ff1d496a853d6a24863fb7d7212483fa1923bee60efdb244d69934e7001e9e3a4d25d4a73c42ba934ab3a29d8b357dcb270624a69c06991bfcdbbf24ae66343c138c1d3940024e4e4af1f3bb8600bb25332713a21fae859d0061a90299fd76e25004f49e039f9654db907bad3341e44a7c8a3722fc1c88bb2619296e1d7612c3d0bd028daba24bb99c20911319f8ee3b4d874ab412dd06773f2c11296a0e6e033a40b76460da827536773a774973d3a9d4d9cca72b5080ad202c6952b6c55212758b64fb5a0fd1ee2922d99c3de3976c3a0615381593a49e14f55b531b527401247db494f65b5179109e3e2344c8d6910a6d22429f9dce7ee768d0a6dcad047db8f2f3b22d982946048482f15a0afa7bec8167518bca221d7a8ea7ff2bcd7a39f7376fdda25ec34a96339cb23dc7b15633a46c3b723b899b9cf0ec285ebdc6c3b0d0030036fc358291feb9d1951d0903e7cd994456e2ce9f193fead053617d30ec3";
$str = pack('H*',$post_data);
echo $str;
echo '<BR><BR><BR>';
//echo base64_encode($str);
echo '<BR><BR><BR>';

//echo time();
//echo '<BR>';
$idstring[0]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[1]='9a65d02cf133853024b8097b5201f289';
$idstring[2]='0ed70f0792f51ba094e72921c33e7704';
$idstring[3]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[4]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[5]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[6]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[7]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[8]='e3bccf97497d86e76bed2e6f69b0b420';
$idstring[9]='fade427117ae2c821c6144f29b204ec2';

// 初始化一个 cURL 对象
$curl = curl_init();

// 指定代理地址
curl_setopt($curl, CURLOPT_PROXY, '192.168.2.135:8888');
// 如果需要的话，提供用户名和密码
//curl_setopt($curl, CURLOPT_PROXYUSERPWD,'user:pass');

// 设置你需要抓取的URL
curl_setopt($curl, CURLOPT_URL, 'http://112.4.28.64:8080/client/shopCheckinDo');

// 设置header,curl_exec返回的data内容不包括header
curl_setopt($curl, CURLOPT_HEADER, 1);

//$head[0] = 'KW: '.date("YmdHis").'#'.$idstring[9];
$head[0] = 'KW: 20141027172916#9a65d02cf133853024b8097b5201f289';
$head[]  = 'SID: 5E836936D590F6D850DD9C444F0FACAB'; 
$head[]  = 'clientName: ANDROID'; 
$head[]  = 'version: 3.4'; 
$head[]  = 'terminalId: 18752011082'; 
$head[]  = 'userId: 16213538'; 
$head[]  = 'imei: 865267020948781'; 
$head[]  = 'imsi: 460027520131772'; 
$head[]  = 'channel: StoreAlliance'; 
$head[]  = 'Content-Length: 792'; 
$head[]  = 'Content-Type: text/plain; charset=UTF-8'; 
$head[]  = 'Host: 112.4.28.64:8080'; 
$head[]  = 'Connection: Keep-Alive'; 

// 设置cURL 参数，要求结果保存到字符串中还是输出到屏幕上。
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_HTTPHEADER, $head);

// 我们在POST数据哦！
$str1 = '{"CHECK_KW":"'.date("YmdHis").'#'.$idstring[9].'","USER_ID":"02530460351","VERSION":"1.0","CHECK_SID":"5E836936D590F6D850DD9C444F0FACAB","USER_NAME":"jun","CONT":"Check","LEVEL":"0.0","AREA_CODE":"025","SHOP_ID":"5989","U_ID":"16213538","TYPE":0,"IMG":"","TERMINAL_ID":"18752011082"}';
$str2 = base64_encode($str1);
$post_data = bin2hex($str2);
//echo $post_data ;
//echo '<BR>';
$post2= '65794a44534556445331394c56794936496a49774d5451784d4449334d5463794f544532497a6c684e6a566b4d444a6a5a6a457a4d7a67314d7a41794e4749344d446b33596a55794d44466d4d6a67354969776956564e46556c394a52434936496a41794e544d774e4459774d7a557849697769566b565355306c5054694936496a45754d434973496b4e4952554e4c58314e4a52434936496a56464f444d324f544d32524455354d455932524467314d4552454f554d304e4452474d455a42513046434969776956564e46556c394f51553146496a6f69616e5675496977695130394f56434936497565747675574973434973496b7846566b564d496a6f694d4334774969776951564a465156394454305246496a6f694d44493149697769553068505546394a52434936496a55354f446b694c434a5658306c45496a6f694d5459794d544d314d7a67694c434a5557564246496a6f774c434a4a545563694f6949694c434a5552564a4e535535425446394a52434936496a45344e7a55794d4445784d446779496e303d';
curl_setopt($curl, CURLOPT_POST, 1);
// 把post的变量加上
curl_setopt($curl, CURLOPT_POSTFIELDS, $post2);

// 运行cURL，请求网页
//$data = curl_exec($curl);

if ($data === FALSE) {
    echo "cURL Error: " . curl_error($curl);
}

$info = curl_getinfo($curl);
echo 'Get '. $info['url'] . ' Cost '. $info['total_time'] . ' Second<BR><BR><BR>';
//var_dump($info);

// 关闭URL请求
curl_close($curl);
var_dump($data);

?>
 </BODY>
</HTML>